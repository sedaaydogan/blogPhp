<?php	require_once "fonksiyon.php";		## Tema İçerik Fonksiyonu ##	function tema_icerik(){				$do = g("do");		Switch ($do){					case "konu":			if ($link = g("link")){								$query = query("SELECT * FROM konular WHERE konu_link = '$link'");				if (mysql_affected_rows()){									$row = row($query);					$konu = explode("-------------------------------", $row["konu_aciklama"]);					$title = ss($row["konu_baslik"]);					$desc = strip_tags(kisalt(ss($konu[1]), 220));					$keyw = implode(", ", explode(" ", ss($row["konu_baslik"])));								}							}			break;						case "kategori":			if ($link = g("link")){				$query = @mysql_query("SELECT * FROM kategoriler WHERE kategori_link = '$link'");				if ($query){					$row = row($query);										$title = ss($row["kategori_adi"]);					$desc = ss($row["kategori_desc"]);					$keyw = ss($row["kategori_keyw"]);									}			}			break;						case "uye":			// boş			break;						case "giris":			if (!session("login")){				$title = "Üye Girişi - ".ss(SITE_TITLE);			}			break;						case "cikis":			if (!session("login")){				$title = "Üye Çıkışı - ".ss(SITE_TITLE);			}			break;						case "etiket":			if ($etiket = g("link")){				$title = ss($etiket)." ile İlgili Konular - ".SITE_TITLE;				$desc = ss($etiket)." ile İlgili Konular";				$keyw = implode(", ", explode(" ", $kelime));			}			break;						case "kayit":			if (!session("login")){				$title = "Kayıt Ol - ".ss(SITE_TITLE);			}			break;						case "sayfa":			if ($link = g("link")){				$query = query("SELECT * FROM sayfalar WHERE sayfa_link = '$link'");				if (mysql_affected_rows()){					$row = row($query);										$title = ss($row["sayfa_baslik"]);					$desc = strip_tags(kisalt(ss($row["sayfa_icerik"]), 220));					$keyw = implode(", ", explode(" ", $title));									}else {					$title = "Sayfa Bulunamadı - ".SITE_TITLE;				}			}			break;						case "arama":			if ($kelime = g("kelime")){				$title = ss($kelime)." İle İlgili Arama Sonuçları";				$desc = ss($kelime)." İle İlgili Arama Sonuçları";				$keyw = implode(", ", explode(" ", ss($kelime)));			}			break;						case "profil-duzenle":			$title = "Profil Düzenle - ".SITE_TITLE;			break;						case "iletisim":			$title = "İletişim - ".SITE_TITLE;			$desc = ss(SITE_DESC);			$keyw = ss(SITE_KEYW);			break;						default:			$title = ss(SITE_TITLE);			$desc = ss(SITE_DESC);			$keyw = ss(SITE_KEYW);			break;				}		}		## Tema Kategoriler Fonksiyonu ##	function tema_kategoriler(){		$query = @mysql_query("SELECT * FROM kategoriler ORDER BY kategori_adi ASC");		while ($row = row($query)){			echo '<li><a href="'.URL.'/kategori/'.$row["kategori_link"].'">'.ss($row["kategori_adi"]).'</a></li>';		}	}		## Tema Anasayfa Konu Fonksiyonu ##	function tema_anasayfa_konu(){			$sayfa = g("s") ? g("s") : 1;		$ksayisi = rows(@mysql_query("SELECT konu_id FROM konular WHERE konu_onay = 1 && konu_anasayfa = 1"));		if ($ksayisi){			$limit = 6;			$ssayisi = ceil($ksayisi/$limit);			$baslangic = ($sayfa*$limit)-$limit;			$query = @mysql_query("SELECT * FROM konular INNER JOIN uyeler ON uyeler.uye_id = konular.konu_ekleyen INNER JOIN kategoriler ON kategoriler.kategori_id = konular.konu_kategori WHERE konu_onay = 1 && konu_anasayfa = 1 ORDER BY konu_id DESC LIMIT $baslangic, $limit");			while ($row = row($query)){				$konuid=$row["konu_id"];				$konu = explode("--------------", $row["konu_aciklama"]);				$konu = $konu[0];				$baslik = ss($row["konu_baslik"]);				$link = URL."/".$row["konu_link"].".html";				$katlink = URL."/kategori/".$row["kategori_link"];				$kategori = ss($row["kategori_adi"]);				$okunma = number_format($row["konu_hit"]);				$tarihExplode = explode(" ", $row["konu_tarih"]);				$tarih = $tarihExplode[0];				$zaman = $tarihExplode[1];				require TEMA."/konu_anasayfa.php";			}		}else {			$hata = "Henüz hiç içerik eklenmemiş.";			require_once TEMA."/hata.php";		}			}	## Tema Arama Konu Fonksiyonu ##	function tema_arama_konu($kelime){			$sayfa = g("s") ? g("s") : 1;		$ksayisi = rows(query("SELECT konu_id FROM konular WHERE  konu_baslik like '%$kelime%' && konu_onay = 1 "));		if (mysql_affected_rows()){			$limit = 6;			$ssayisi = ceil($ksayisi/$limit);			$baslangic = ($sayfa*$limit)-$limit;			$query = query("SELECT * FROM konular INNER JOIN uyeler ON uyeler.uye_id = konular.konu_ekleyen INNER JOIN kategoriler ON kategoriler.kategori_id = konular.konu_kategori WHERE konu_onay = 1 && konu_baslik like '%$kelime%' ORDER BY konu_id DESC LIMIT $baslangic, $limit");			while ($row = row($query)){				$konuid=$row["konu_id"];				$konu = explode("--------------", $row["konu_aciklama"]);				$konu = $konu[0];				$baslik = ss($row["konu_baslik"]);				$link = URL."/".$row["konu_link"].".html";				$katlink = URL."/kategori/".$row["kategori_link"];				$kategori = ss($row["kategori_adi"]);				$okunma = number_format($row["konu_hit"]);				$tarihExplode = explode(" ", $row["konu_tarih"]);				$tarih = $tarihExplode[0];				$zaman = $tarihExplode[1];				require TEMA."/konu_anasayfa.php";			}		}else {			$hata = "<strong>".ss($kelime)."</strong> aramasına ait sonuc bulanamadı";			require_once TEMA."/hata.php";		}			}	## Tema etiket Konu Fonksiyonu ##	function tema_etiket_konu($kelime){			$sayfa = g("s") ? g("s") : 1;		$ksayisi = rows(query("SELECT konu_id FROM konular WHERE  konu_etiket like '%$kelime%' && konu_onay = 1 "));		if (mysql_affected_rows()){			$limit = 6;			$ssayisi = ceil($ksayisi/$limit);			$baslangic = ($sayfa*$limit)-$limit;			$query = query("SELECT * FROM konular 			INNER JOIN uyeler ON uyeler.uye_id = konular.konu_ekleyen 			INNER JOIN kategoriler ON kategoriler.kategori_id = konular.konu_kategori 			WHERE konu_onay = 1 && konu_etiket like '%$kelime%' 			ORDER BY konu_id DESC LIMIT $baslangic, $limit");			while ($row = row($query)){				$konuid=$row["konu_id"];				$konu = explode("--------------", $row["konu_aciklama"]);				$konu = $konu[0];				$baslik = ss($row["konu_baslik"]);				$link = URL."/".$row["konu_link"].".html";				$katlink = URL."/kategori/".$row["kategori_link"];				$kategori = ss($row["kategori_adi"]);				$okunma = number_format($row["konu_hit"]);				$tarihExplode = explode(" ", $row["konu_tarih"]);				$tarih = $tarihExplode[0];				$zaman = $tarihExplode[1];				require TEMA."/konu_anasayfa.php";			}		}else {			$hata = "<strong>".ss($kelime)."</strong> aramasına ait sonuc bulanamadı";			require_once TEMA."/hata.php";		}			}	## Tema Kategori Konu Fonksiyonu ##	function tema_kategori_konu($katid){			$sayfa = g("s") ? g("s") : 1;		$ksayisi = rows(query("SELECT konu_id FROM konular WHERE konu_onay = 1 && konu_kategori = '$katid'"));		if (mysql_affected_rows()){			$limit = 2;			$ssayisi = ceil($ksayisi/$limit);			$baslangic = ($sayfa*$limit)-$limit;			$query = query("SELECT * FROM konular 			INNER JOIN uyeler ON uyeler.uye_id = konular.konu_ekleyen 			INNER JOIN kategoriler ON kategoriler.kategori_id = konular.konu_kategori 			WHERE konu_onay = 1 && konu_kategori = '$katid' && konu_anasayfa = 1 			ORDER BY konu_id DESC LIMIT $baslangic, $limit");			while ($row = row($query)){				$konuid=$row["konu_id"];				$konu = explode("--------------", $row["konu_aciklama"]);				$konu = $konu[0];				$baslik = ss($row["konu_baslik"]);				$link = URL."/".$row["konu_link"].".html";				$katlink = URL."/kategori/".$row["kategori_link"];				$kategori = ss($row["kategori_adi"]);				$okunma = number_format($row["konu_hit"]);				$tarihExplode = explode(" ", $row["konu_tarih"]);				$tarih = $tarihExplode[0];				$zaman = $tarihExplode[1];				require TEMA."/konu_anasayfa.php";			}		}else {			$hata = "Henüz bu kategoriye içerik eklenmemiş.";			require_once TEMA."/hata.php";		}			}		## Tema Anasayfa Sayfalama ##	function tema_sayfalama($tip="anasayfa", $id = null){		$sayfa = g("s") ? g("s") : 1;		if($tip=="anasayfa"){		$ksayisi = rows(query("SELECT konu_id FROM konular WHERE konu_onay = 1 && konu_anasayfa = 1"));		}elseif($tip == "kategori"){		$ksayisi = rows(query("SELECT konu_id FROM konular WHERE konu_onay = 1 && konu_kategori = '$id'"));		}		$limit = 2;		$ssayisi = ceil($ksayisi/$limit);		if ($ksayisi > $limit){					## Önceki Sayfa			$oncekiSayfa = $sayfa > 1 ? $sayfa - 1 : 1;			if($tip=="anasayfa"){			  $onceki = URL.'/sayfa/'.$oncekiSayfa;			}elseif($tip=="kategori"){			  $onceki = URL.'/kategori/'.g("link").'/sayfa/'.$oncekiSayfa;				}			## Sonraki Sayfa			$sonrakiSayfa = $sayfa < $ssayisi ? $sayfa + 1 : $ssayisi;			if ($tip == "anasayfa"){				$sonraki = URL.'/sayfa/'.$sonrakiSayfa;			}elseif ($tip == "kategori"){				$sonraki = URL.'/kategori/'.g("link").'/sayfa/'.$sonrakiSayfa;			}			require_once TEMA."/sayfala.php";		}	}		## Konu Etiketler Fonksiyonu ##	function konu_etiketler($etiketler){		$bol = explode(",", $etiketler);		$etikets = array();		foreach ($bol as $etiket){			$etiket = '<a href="'.URL.'/etiket/'.ss(trim($etiket)).'">'.ss(trim($etiket)).'</a>';			array_push($etikets, $etiket);		}		echo implode(",", $etikets);	}		##Konu Yorumları Fonksiyonu##		function konu_yorumlar($konuid){		$query=query("select * from yorumlar where yorum_konu_id='$konuid' && yorum_onay=1");		if(mysql_affected_rows()){			while($row=row($query)){				if(is_numeric($row["yorum_ekleyen"])){					$uyeQuery=query("select uye_kadi,uye_avatar from uyeler where uye_id='".$row["yorum_ekleyen"]."'");					$uyeRow=row($uyeQuery);					$avatar=$uyeRow["uye_avatar"] ? $uyeRow["uye_avatar"]: TEMA_URL."/images/noavatar.png";					$yazan=ss($uyeRow["uye_kadi"]);				}else{					$yazan=$row["yorum_ekleyen"];					$avatar=TEMA_URL."/images/noavatar.png";									}				$yorum=$row["yorum_icerik"];				require TEMA."/yorum.php";			}		}else{			$hata="Henüz hiç yorum yapılmamış.";			require_once TEMA."/hata.php";		}			}		## Tema İlave Alan Fonksiyonu ##	function ilave_alan($konuid, $alanid){		$query = query("SELECT * FROM alan_degerler WHERE deger_konu_id = '$konuid' && deger_alan_id = '$alanid'");		if (mysql_affected_rows()){			$row = row($query);			echo $row["deger_icerik"];		}else {			return false;		}	}			## Tema Slider Fonksiyonu ##	function tema_slider(){		$query = query("SELECT * FROM konular 		INNER JOIN alan_degerler ON alan_degerler.deger_konu_id = konular.konu_id 		WHERE konu_onay = 1 && deger_alan_id = 1 ORDER BY rand()");		if (mysql_affected_rows()){			while ($row = row($query)){				$link = URL."/".$row["konu_link"].".html";				$resim = $row["deger_icerik"];				$baslik = ss($row["konu_baslik"]);				require TEMA."/slider.php";			}		}else {			return false;		}	}?>